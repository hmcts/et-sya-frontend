{% extends "template.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/details/macro.njk" import govukDetails %}

{% block beforeContent %}
  {{ super() }}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "back-link.njk" %}
      <h1 class="govuk-heading-xl govuk-!-margin-bottom-4 govuk-!-margin-top-1">{{ header }}</h1>
      {{ govukSummaryList({
        rows: appContent
      }) }}

      {% if selectedApplication.value.respondCollection.length %}
        <h2 class="govuk-summary-list__key govuk-heading-m govuk-!-margin-top-1">{{ otherPartyResponse }}</h2>
          {% for respCol in selectedApplication.value.respondCollection %}
            {{ govukSummaryList({
              rows: [
                {
                  key: {
                  text: responder,
                  classes: "govuk-!-font-weight-regular-m"
                },
                  value: { text: respCol.value.from }
                },
                {
                  key: {
                  text: responseDate,
                  classes: "govuk-!-font-weight-regular-m"
                },
                  value: { text: respCol.value.date }
                },
                {
                  key: {
                  text: yourReponse,
                  classes: "govuk-!-font-weight-regular-m"
                },
                  value: { text: respCol.value.response }
                },
                {
                  key: {
                  text: copyCorrespondence,
                  classes: "govuk-!-font-weight-regular-m"
                },
                  value: { text: respCol.value.copyToOtherParty }
                }
              ]
            }) }}
          {% endfor %}
      {% endif %}
    </div>

    <div class="govuk-grid-column-one-third-from-desktop">
      <p class="govuk-body">
        <a href="https://www.gov.uk/find-legal-advice" target="_blank">
          {{ findLegalAdvice }}
        </a>
      </p>

      {% set sideBarContent %}
        {% include "./citizen-hub-sidebar.njk" %}
      {% endset %}

      {{ govukDetails({
        summaryText: "Contact",
        html: sideBarContent
      }) }}
    </div>
  </div>
{% endblock %}

{% block footer %}
  {% include "./footer.njk" %}
{% endblock %}
