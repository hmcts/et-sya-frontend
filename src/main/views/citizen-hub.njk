{% extends "template.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "components/hmcts-progress-bar/macro.njk" import hmctsProgressBar %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}
{% from "govuk/components/details/macro.njk" import govukDetails %}

{% macro sideBar(callEmployer, contactTribunal) %}
  <p class='govuk-body'>
    {{callEmployer}}
  </p>

  <p class='govuk-body'>
    {{contactText}}
    <a>{{contactLink}}</a>
  </p>

  <h2 class="govuk-heading-s">
    {{englandWales}}
  </h2>

  <p class='govuk-body'>
    {{ewNumbers | safe}}
  </p>

  <h2 class="govuk-heading-s">
    {{welsh}}
  </h2>

  <p class='govuk-body'>
    {{welshNumber}}
  </p>

  <h2 class="govuk-heading-s">
    {{scotland}}
  </h2>

  <p class='govuk-body'>
    {{scotlandNumbers | safe}}
  </p>

  <p class='govuk-body'>
    {{hours | safe}}
  </p>

  <a href="#" class="govuk-link">{{callCharges}}</a>
{% endmacro %}

{% block beforeContent %}
  {{ super() }}
  {% include "back-link.njk"%}
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h2 class="govuk-heading-l">
        {{ header + userCase.firstName + ' ' + userCase.lastName }} vs {{ userCase.respondents[0].respondentName }}
    </h2>
      <p id="caseNumber" class="govuk-body">{{ caseNumber + userCase.ethosCaseReference }}</p>

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds-from-desktop">
          {{ hmctsProgressBar({
          items: [{
            label:
            {
              text: accepted
            },
            complete: currentState.isAfter('SUBMITTED'),
            active: currentState.isRightAfter('ACCEPTED')
          }, {
            label: {
              text: received
            },
            complete: currentState.isAfter('ACCEPTED'),
            active: currentState.isRightAfter('RESPONSE_RECEIVED')
          }, {
            label: {
              text: details
            },
            complete: currentState.isAfter('RESPONSE_RECEIVED'),
            active: currentState.isRightAfter('HEARING_DETAILS')
          }, {
            label: {
              text: decision
            },
            complete: currentState.isAfter('HEARING_DETAILS'),
            active: currentState.isRightAfter('CLAIM_DECISION')
           }],
            classes: ''
          }) }}

          <ol class="app-task-list">
            {% for section in sections %}
              <li>
                <h2 class="app-task-list__section">
                  {{getContent(section.title)}}
                </h2>
                <ul class="app-task-list__items">
                  {% for link in section.links %}
                    <li class="app-task-list__item">
                      <span class="app-task-list__task-name">
                        <a href="{{ getContent(link.url) }}" class="govuk-link">
                          {{ getContent(link.linkTxt) }}
                        </a>
                      </span>

                      {{ govukTag({
                    text: getContent(link.status),
                    classes: "app-task-list__tag govuk-tag" + getContent(link.statusColor)
                  }) }}
                    </li>
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ol>
        </div>
        <div class="govuk-grid-column-one-third-from-desktop">
          <h2 class="govuk-heading-s">
            I want to...
          </h2>
          <p class="govuk-body">
            <a href= "#">
            Contact the tribunal about my case
          </a>
          </p>

          <p class="govuk-body">
            <a href= "#">
            Find legal advice (opens in new tab)
          </a>
          </p>

          {{ govukDetails({
            summaryText: "Contact",
            html: sideBar(callEmployer, contactTribunal)
          }) }}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
